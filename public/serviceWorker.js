self.addEventListener("push",function(t){if(!self.Notification||"granted"!==self.Notification.permission)return;if(t.data){const i=t.data.text();t.waitUntil((t=>{const i=JSON.parse(t);return self.registration.showNotification(i.title,{body:i.body,badge:i.badge,image:i.image,data:{actions:i.actions,url:i.url},icon:i.icon,vibrate:i.vibrate,tag:i.tag,actions:i.actions})})(i))}}),self.addEventListener("notificationclick",function(t){const i=t.notification,n=i.data.actions.find(({action:i})=>i===t.action),a=i.data.url;t.waitUntil(clients.matchAll({type:"window"}).then(i=>{if(t.action){if(n&&n.url)return clients.openWindow(n.url)}else{const t=i.find(t=>t.url===a);if(t&&a)return t.focus();if(a)return clients.openWindow(a).then(t=>t?t.focus():null)}})),i.close()});
